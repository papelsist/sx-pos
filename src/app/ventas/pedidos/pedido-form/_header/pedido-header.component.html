<div layout="column" [formGroup]="parent">
  <div layout class="row1">
    <md-form-field class="pad-right " *ngIf="parent.get('id').value" flex="60">
      <input type="text" mdInput placeholder="Cliente" class="tc-indigo-700"
          value="{{parent.get('cliente').value.nombre}}" [disabled]="true">
    </md-form-field>
    <sx-cliente-field flex="60" formControlName="cliente"  *ngIf="!parent.get('id').value"></sx-cliente-field>
    <div layout layout-align="center center" class="pad-left" >

      <md-form-field class="pad-right" *ngIf="parent.get('id').value">
        <input type="text" mdInput placeholder="Documento"
          value="{{parent.get('tipo').value}} - {{parent.get('documento').value}}" [disabled]="true">
      </md-form-field>

      <md-form-field class="pad-right" >
        <input type="text" mdInput placeholder="Socio" [disabled]="true">
      </md-form-field>
    </div>

    <span flex></span>

    <span>
      <button md-icon-button  (click)="insertar.emit()"  type="button" mdTooltip="Agregar partida" >
        <md-icon>add</md-icon>
      </button>
      <button md-icon-button [matMenuTriggerFor]="toolbarMenu" type="button"><md-icon>more_vert</md-icon></button>
      <md-menu #toolbarMenu="mdMenu">
        <button md-menu-item (click)="addCliente.emit()"  mdTooltip="Buscr cliente" type="button">
          <md-icon>person_add</md-icon>
          <span>Agregar cliente</span>
        </button>

        <button md-menu-item (click)="descuento.emit()"  mdTooltip="Descuento especial" type="button">
          <md-icon>keyboard_arrow_right</md-icon>
          <span>Descuento especial</span>
        </button>

        <button md-menu-item (click)="maniobra.emit()"  mdTooltip="Agregar maniobra" type="button">
          <md-icon>keyboard_arrow_right</md-icon>
          <span>Agregar maniobra</span>
        </button>


      </md-menu>
    </span>

  </div>

  <div class="row2" layout *ngIf="cliente?.rfc === 'XAXX010101000' ">
    <md-form-field flex="50" class="pad-right">
      <input type="text" mdInput placeholder="Nombre" formControlName="nombre">
    </md-form-field>
    <span flex></span>
  </div>

  <div layout class="row2">

    <address *ngIf="cliente?.direccion; let direccion" class="text-md">
        {{direccion.calle}} {{direccion.numeroExterior}}<br>
        {{direccion.colonia}}<br>
        {{direccion.estado}} / {{direccion.pais}}<br>
        {{direccion.codigoPostal}}<br>
    </address>

    <div layout="column" class="pad-left-md text-md" flex="50">
      <span layout class="pad-top-xs">
        <span flex="20">RFC:</span>
        <span class="tc-indigo-700" flex>{{cliente?.rfc}}</span>
      </span>
      <div layout class="pad-top-xs">
        <span flex="20">TELS:</span>
        <span class="tc-indigo-700 " flex>{{cliente?.telefonos?.join('/')}}</span>
      </div>
      <div layout class="pad-top-xs">
          <span flex="20">CFDI Mail:</span>
          <span class="tc-pink-700 " flex>
            <a (click)="cambiarCfdi.emit(cliente)" mb-button >
              {{cliente?.cfdiMail}}
            </a>
          </span>
        </div>
    </div>

    <div layout="column" >
      <span class="text-right pad-left" > Cr√©dito: {{cliente?.credito? 'SI': 'NO'}}</span>
      <span class="text-right pad-left text-md" *ngIf="cliente?.credito && cliente?.credito?.postfechado" >Postfechado</span>
      <span class="pad-top-sm pad-bottom-sm tc-amber-800" *ngIf="isDescuentoEspecial()"> PEDIDO CON DESCUENTO ESPECIAL </span>
    </div>

    <span *ngIf="comprador" class="pad-left pad-right">
      <span>Comprador: </span>
      <span class="tc-pink-700">{{comprador}}</span>
    </span>


    <span flex></span>
    <div layout layout-align="center center" class="pad-left" *ngIf="kilos > 0">
      <span>Kilos: </span>
      <span class="text-right pad-left">{{kilos}}</span>
    </div>

  </div>
</div>
