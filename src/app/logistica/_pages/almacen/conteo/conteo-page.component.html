<div layout *tdLoading="let working until !(procesando$ | async); type:'circular'; color:'primary' strategy:'overlay';">

  <md-card flex >
    <div layout="row" layout-align="start center" class="pad-left-sm pad-right-sm "  >
      <span  class="push-left-sm" flex>
          <span class="md-title">{{title}}</span>
      </span>
      <td-search-box #searchBox backIcon="arrow_back" class="push-right-sm"
                     placeholder="Sector " (searchDebounce)="search($event)" flex>
      </td-search-box>
      <button md-icon-button (click)="load()"><md-icon>refresh</md-icon></button> 
      <span>
        <button md-icon-button [mdMenuTriggerFor]="toolbarMenuParcial"><md-icon>style</md-icon></button>
        <md-menu #toolbarMenuParcial="mdMenu">
          <button md-menu-item (click)="cargaSector()">
            <md-icon>layers</md-icon>
            <span>Cargar Por Sector</span>
          </button> 
          <button md-menu-item (click)="imprimirSectoresConteo()">
            <md-icon>print</md-icon>
            <span>Imprimir Sectores</span>
          </button> 
          <button md-menu-item (click)="generarExistenciaParcial()">
            <md-icon>settings</md-icon>
            <span>Generar existencia Parcial</span>
          </button> 
          <button md-menu-item (click)="fijarConteo()">
            <md-icon>settings</md-icon>
            <span>Fijar conteo Parcial</span>
          </button>
          <button md-menu-item (click)="ajustarConteo()">
              <md-icon>settings</md-icon>
              <span>Generar Ajuste</span>
          </button> 
          <button md-menu-item (click)="limpiarExistencias()">
            <md-icon>settings</md-icon>
            <span>Limpiar Tablas</span>
        </button>        
        </md-menu>
      </span>
      <span>
          <button md-icon-button [mdMenuTriggerFor]="toolbarMenu"><md-icon>more_vert</md-icon></button>
          <md-menu #toolbarMenu="mdMenu">
            <button md-menu-item (click)="genearConteo()">
              <md-icon>settings</md-icon>
              <span>Carga de sectores</span>
            </button>
            <button md-menu-item (click)="imprimirSectoresConteo()">
                <md-icon>print</md-icon>
                <span>Imprimir Sectores</span>
          </button>
            <button md-menu-item (click)="generarExistencias()">
              <md-icon>settings</md-icon>
              <span>Generar existencias</span>
            </button>
            <!-- <button md-menu-item  (click)="limpiarExistencias()">
              <md-icon>settings</md-icon>
              <span>Limpiar existencias</span>
            </button> -->
            <button md-menu-item (click)="fijarConteo()">
              <md-icon>settings</md-icon>
              <span>Fijar conteo</span>
            </button>

            <button md-menu-item (click)="ajustarConteo()">
                <md-icon>settings</md-icon>
                <span>Generar Ajuste</span>
            </button>

            <!-- <button md-menu-item (click)="fijarConteo()">
                <md-icon>settings</md-icon>
                <span>Generar Ajuste</span>
            </button> -->
            
          </md-menu>
        </span>
    </div>

    <md-divider></md-divider>
    <md-card-content class="page-grid"
                     *tdLoading="let loading until !(loading$ | async); color: 'accent' strategy:'overlay';">
      <sx-conteo-grid [conteos]="conteos$ | async" (print)="print($event)"></sx-conteo-grid>
    </md-card-content>
  </md-card>

</div>
